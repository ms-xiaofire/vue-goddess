(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c8f1"],{"2ca8":function(t,a,e){"use strict";var s=e("9e4c"),n=e.n(s);n.a},"7f7f":function(t,a,e){var s=e("86cc").f,n=Function.prototype,o=/^\s*function ([^ (]*)/,i="name";i in n||e("9e1e")&&s(n,i,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},9526:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"edit"},[e("go-back"),e("div",{staticClass:"box"},[e("span",[t._v("头像")]),e("div",{staticClass:"head"},[e("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload,action:"/a/u/upload"}},[e("img",{staticClass:"avatar",attrs:{src:t.params.photo}})])],1)]),e("div",{staticClass:"box"},[e("span",[t._v("昵称")]),e("span",{on:{click:t.changeName}},[t._v(t._s(t.params.name))])]),e("div",{staticClass:" box select",on:{click:function(a){t.popupVisible=!0}}},[e("span",[t._v("年级")]),e("span",[t._v(t._s(t._f("noGrade")(t._f("gradeFilter")(t.params.grade))))])]),e("mt-popup",{staticClass:"mint-popup",attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(a){t.popupVisible=a},expression:"popupVisible"}},[e("mt-picker",{ref:"picker",attrs:{slots:t.dateSlots,"visible-item-count":5,"show-toolbar":!0,"value-key":"grade"}},[e("mt-button",{staticClass:"usi-btn-cancel bg",on:{click:function(a){t.popupVisible=!t.popupVisible}}},[t._v("取消")]),e("mt-button",{staticClass:"sure bg",on:{click:t.handleConfirm}},[t._v("确认")])],1)],1),e("div",{staticClass:"submit",on:{click:t.submit}},[t._v("保存修改")])],1)},n=[],o=(e("7f7f"),e("bbc2")),i=e("76a0"),r={name:"edit",components:{},filters:{noGrade:function(t){return"全部"===t?"未设置":t}},data:function(){return{params:{name:"名称",grade:"年级",phtot:""},popupVisible:!1,dateSlots:[{flex:1,defaultIndex:0,values:[{grade:"初一",value:7},{grade:"初二",value:8},{grade:"初三",value:9},{grade:"高一",value:10},{grade:"高二",value:11},{grade:"高三",value:12}]}]}},created:function(){var t=this,a=console,e=a.log;this.$http.get(o["a"].studentInfo+this.$root.userID).then(function(a){t.params=a.data.data,e(a.data.data),t.dateSlots["0"].defaultIndex=t.params.grade-7},function(t){e(t)})},methods:{changeName:function(){var t=this;i["MessageBox"].prompt("请输入昵称",{inputValidator:function(t){return!(t.length<1||t.length>8)},inputErrorMessage:"请输入合法昵称"}).then(function(a){t.params.name=a.value},function(){console.info("cancel")})},handleConfirm:function(){console.log(this.$refs.picker.getValues()),this.params.grade=this.$refs.picker.getValues()[0].value,this.popupVisible=!1},handleAvatarSuccess:function(t){console.log(t),this.params.photo=t.data.url,console.log(this.params.photo)},beforeAvatarUpload:function(t){var a=t.name.substring(t.name.lastIndexOf(".")+1),e="png"===a,s="jpg"===a,n="gif"===a,o=t.size/1024/1024<2;return e||s||n||this.$message.error("请上传 png、jpg、gif格式的图片!"),o||this.$message.error("上传头像图片大小不能超过 2MB!"),(e||s||n)&&o},submit:function(){var t=this.params,a=t.name,e=t.photo,s=t.grade;console.log({name:a,photo:e,grade:s}),this.$http.put(o["a"].studentEdit+this.$root.userID,{name:a,photo:e,grade:s}).then(function(t){console.log(t),0===t.body.code&&i["MessageBox"].alert("",{message:'<p style="text-align: center;font-size: .4rem">修改成功</p>',title:"提示",confirmButtonText:"好的"})},function(t){console.log(t)})}}},c=r,l=(e("2ca8"),e("2877")),u=Object(l["a"])(c,s,n,!1,null,"6136c2e6",null);a["default"]=u.exports},"9e4c":function(t,a,e){}}]);