(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c490"],{3854:function(e,t,o){},"96d7":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"bound"},[o("go-back"),o("div",{staticClass:"header"},[o("div",{staticClass:"half",class:{border:e.show},on:{click:function(t){e.show=!0,e.resetForm("myForm"),e.sendAuthCode=!0}}},[e._v(" 手机号绑定")]),o("div",{staticClass:"half",class:{border:!e.show},on:{click:function(t){e.show=!1,e.resetForm("myForm"),e.sendAuthCode=!0}}},[e._v("邮箱绑定")])]),e._m(0),o("el-form",{ref:"myForm",staticClass:"myForm",attrs:{model:e.myForm,rules:e.rules,"status-icon":"","label-position":"top"}},[e.show?o("el-form-item",{attrs:{prop:"tel"}},[o("el-input",{attrs:{type:"number",placeholder:"请输入手机号码",clearable:""},model:{value:e.myForm.tel,callback:function(t){e.$set(e.myForm,"tel",t)},expression:"myForm.tel"}},[o("i",{staticClass:"  fa fa-phone fa-lg pl-5",attrs:{slot:"prefix"},slot:"prefix"})])],1):o("el-form-item",{attrs:{prop:"email"}},[o("el-input",{attrs:{placeholder:"请输入邮箱",clearable:""},model:{value:e.myForm.email,callback:function(t){e.$set(e.myForm,"email",t)},expression:"myForm.email"}},[o("i",{staticClass:" fa fa-envelope fa-lg",attrs:{slot:"prefix"},slot:"prefix"})])],1),o("el-form-item",{attrs:{prop:"verify"}},[o("el-input",{staticClass:"verify ",attrs:{type:"number",placeholder:"请输验证码",clearable:""},model:{value:e.myForm.verify,callback:function(t){e.$set(e.myForm,"verify",t)},expression:"myForm.verify"}},[o("i",{staticClass:" fa fa-key fa-lg pl-5",attrs:{slot:"prefix"},slot:"prefix"})]),o("span",{directives:[{name:"show",rawName:"v-show",value:e.sendAuthCode,expression:"sendAuthCode"}],staticClass:"auth_text auth_text_blue",on:{click:function(t){e.getAuthCode("myForm")}}},[e._v("获取验证码")]),o("span",{directives:[{name:"show",rawName:"v-show",value:!e.sendAuthCode,expression:"!sendAuthCode"}],staticClass:"auth_text"},[o("span",{staticClass:"auth_text_blue"},[e._v(e._s(e.authTime)+" ")]),e._v(" 秒之后重试")])],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("myForm")}}},[e._v("提交")])],1)],1)],1)},s=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("p",{staticClass:"notice"},[o("i",{staticClass:" fa fa-bullhorn fa-lg "}),e._v("通过绑定手机号/邮箱可获得20颗逆袭豆")])}],a=o("bbc2"),i=o("76a0"),l={name:"bound",data:function(){return{show:!0,sendAuthCode:!0,authTime:0,verification:"",rules:{tel:[{required:!0,message:"请输入手机号码",trigger:["blur"]},{pattern:/^1[34578]\d{9}$/,message:"请输入正确的手机号码",trigger:["blur"]}],email:[{required:!0,message:"请输入邮箱地址",trigger:["blur"]},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur"]}],verify:[{required:!0,message:"请输入验证码",trigger:["blur"]},{min:6,max:6,message:"请输入6位数验证码",trigger:["blur"]}]},myForm:{tel:"",email:"",verify:""}}},methods:{myAlert:function(e){i["MessageBox"].alert("",{message:'<p style="text-align: center;font-size: .4rem" >'.concat(e,"</p>"),title:"提示",confirmButtonText:"好的"})},submitForm:function(e){var t=this,o=console,r=o.log;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;console.log(t.myForm),t.show?t.$http.post(a["a"].boundPhone+t.$root.userID,{iphone:t.myForm.tel,code:t.myForm.verify}).then(function(e){r(e),0===e.body.code&&i["MessageBox"].confirm("",{message:'<p style="text-align: center;font-size: .4rem" > 绑定成功</p>',title:"提示",confirmButtonText:"好的",showCancelButton:!1}).then(function(e){"confirm"===e&&t.$router.push("card")}),-1007===e.body.code&&t.myAlert("今天还没发送过验证码"),-1002===e.body.code&&t.myAlert("已经被绑定过了"),-1005===e.body.code&&t.myAlert("验证码错误")},function(e){r(e)}):t.$http.post(a["a"].boundMail+t.$root.userID,{mail:t.myForm.email,code:t.myForm.verify}).then(function(e){r(e),0===e.body.code&&t.myAlert("绑定成功"),-1007===e.body.code&&t.myAlert("今天还没发送过验证码"),-1002===e.body.code&&t.myAlert("已经被绑定过了"),-1005===e.body.code&&t.myAlert("验证码错误")},function(e){r(e)})})},resetForm:function(e){this.$refs[e].resetFields()},getAuthCode:function(e){var t=this,o=this.show?"tel":"email",r=console,s=r.log;this.$refs[e].validateField(o,function(e){if(!e){var o=t.show?t.myForm.tel:t.myForm.email,r=t.show?1:2;return t.$http.post(a["a"].authCode+t.$root.userID,{contant:o,type:r}).then(function(e){s(e),-1003===e.body.code&&t.myAlert("今天发送验证码超过三次了，请明天再试"),t.sendAuthCode=!1,t.authTime=30;var o=setInterval(function(){t.authTime--,t.authTime<=0&&(t.sendAuthCode=!0,clearInterval(o))},1e3)},function(e){}),!1}})}}},n=l,m=(o("a8fb"),o("2877")),c=Object(m["a"])(n,r,s,!1,null,"7676ac89",null);t["default"]=c.exports},a8fb:function(e,t,o){"use strict";var r=o("3854"),s=o.n(r);s.a}}]);